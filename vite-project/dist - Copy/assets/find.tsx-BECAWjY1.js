import{r as f,j as s,c as v,R as C}from"./client-IsLpfBRF.js";const k=()=>{const[e,t]=f.useState(null),[l,u]=f.useState(null),[c,i]=f.useState(null),o="task-score icon full",y="problemset/task",b="task-score icon zero",S=()=>{let a=0,h=0,x=0;const w=document.createTreeWalker(document.body,NodeFilter.SHOW_ALL,null);let n=w.nextNode();for(;n;){if(n.nodeName.toLowerCase().includes(o)&&a++,n.nodeType===Node.ELEMENT_NODE){const m=n;for(let r=0;r<m.attributes.length;r++){const g=m.attributes[r];g.value.toLowerCase().includes(o)&&a++,g.value.toLowerCase().includes(y)&&h++,g.value.toLowerCase().includes(b)&&x++}}if(n.nodeType===Node.TEXT_NODE&&n.textContent){const r=n.textContent.toLowerCase().match(new RegExp(o,"g"));r&&(a+=r.length)}n=w.nextNode()}i(x),u(h),t(a)};return s.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[s.jsx("button",{onClick:S,style:{textTransform:"uppercase",fontSize:"0.88rem",textDecoration:"none",color:"#5cafff",padding:"3px 9.6px",outline:"none"},children:"MyStats:"}),e!==null&&s.jsxs("span",{style:{marginLeft:"5px",fontWeight:"bold",color:e>0?"green":"red",fontSize:"14px"},children:["SOLVED: ",e," ",s.jsxs("div",{style:{color:"red"},children:["WRONG: ",c]})," ",s.jsxs("div",{style:{color:"blue"},children:["TOTAL: ",l,"  "]})]})]})};console.log("Ramen Finder Content Script Loaded!");console.log("finding if we have logged in or not?");const E=window.location.href,L="https://cses.fi/login";let p=!0;const T="#181818";E===L&&(console.log("we are on login Page!"),p=!1,chrome.storage.local.get(["username","pwd","mode"]).then(e=>{const t=e.username,l=e.pwd,u=e.mode;console.log(document.body.style.backgroundColor.toString()),u==="d"&&document.body.style.backgroundColor.toString()!=T&&document.querySelector('a[href="/darkmode"]').click(),console.log("username from extension storage: "+t),console.log("pwd from extension storage: "+l);const c=document.getElementById("nick"),i=document.querySelector('input[name="pass"]');if(c&&i&&t&&l&&"value"in c){c.value=t,i.value=l,console.log("submitting the username and password");const o=document.querySelector('input[type="submit"]');o&&"click"in o&&o.click()}}).catch(e=>{console.error("Error retrieving from storage:",e)}));const d=document.querySelector('a[href="/login"]');p&&d&&d.innerHTML==="Login"&&"click"in d&&(console.log("we have not logged in yet!"),p=!1,d.click(),console.log("redirected"));if(window.location.href.startsWith("https://cses.fi/problemset/")){console.log("we are inside the problem set");const e=document.querySelector("ul.nav");if(e){console.log("Target <ul>.nav found, injecting React button.");const t=document.createElement("li");t.id="ramen-finder-root",e.appendChild(t),v.createRoot(t).render(s.jsx(C.StrictMode,{children:s.jsx(k,{})}))}else console.warn("Target <ul> with class 'nav' not found on this page. Button not injected.")}
